/*!
 * @preserve
 * jquery.scrolldepth.js | v1.0
 * Copyright (c) 2016 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(g){var f={minHeight:0,elements:[],percentage:true,userTiming:true,pixelDepth:true,nonInteraction:true,gaGlobal:false,gtmOverride:false,trackerName:false,dataLayer:"dataLayer"};var b=g(window),a=[],h=false,d=0,c,j,e,k,i;g.scrollDepth=function(v){var m=+new Date;v=g.extend({},f,v);var p=v.selector||document;if(g(p).height()<v.minHeight){return}if(v.gaGlobal){c=true;e=v.gaGlobal}else{if(typeof gtag==="function"){k=true;e="gtag"}else{if(typeof ga==="function"){c=true;e="ga"}else{if(typeof __gaTracker==="function"){c=true;e="__gaTracker"}}}}if(typeof _gaq!=="undefined"&&typeof _gaq.push==="function"){j=true}if(typeof v.eventHandler==="function"){i=v.eventHandler}else{if(typeof window[v.dataLayer]!=="undefined"&&typeof window[v.dataLayer].push==="function"&&!v.gtmOverride){i=function(w){window[v.dataLayer].push(w)}}}function u(z,x,w,y){var A=v.trackerName?(v.trackerName+".send"):"send";if(i){i({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:z,eventLabel:x,eventValue:1,eventNonInteraction:v.nonInteraction});if(v.pixelDepth&&arguments.length>2&&w>d){d=w;i({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:n(w),eventValue:1,eventNonInteraction:v.nonInteraction})}if(v.userTiming&&arguments.length>3){i({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:z,eventLabel:x,eventTiming:y})}if(k){gtag("event","scroll_depth",{category:"Scroll Depth",scroll_distance:x,px_distance:w})}}else{if(c){window[e](A,"event","Scroll Depth",z,x,1,{nonInteraction:v.nonInteraction});if(v.pixelDepth&&arguments.length>2&&w>d){d=w;window[e](A,"event","Scroll Depth","Pixel Depth",n(w),1,{nonInteraction:v.nonInteraction})}if(v.userTiming&&arguments.length>3){window[e](A,"timing","Scroll Depth",z,y,x)}}if(j){_gaq.push(["_trackEvent","Scroll Depth",z,x,1,v.nonInteraction]);if(v.pixelDepth&&arguments.length>2&&w>d){d=w;_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",n(w),1,v.nonInteraction])}if(v.userTiming&&arguments.length>3){_gaq.push(["_trackTiming","Scroll Depth",z,y,x,100])}}}}function s(w){return{"25%":parseInt(w*0.25,10),"50%":parseInt(w*0.5,10),"75%":parseInt(w*0.75,10),"100%":w-5}}function q(x,w,y){g.each(x,function(z,A){if(g.inArray(z,a)===-1&&w>=A){u("Percentage",z,w,y);a.push(z)}})}function o(y,w,x){g.each(y,function(z,A){if(g.inArray(A,a)===-1&&g(A).length){if(w>=g(A).offset().top){u("Elements",A,w,x);a.push(A)}}})}function n(w){return(Math.floor(w/250)*250).toString()}function t(){l()}g.scrollDepth.reset=function(){a=[];d=0;b.off("scroll.scrollDepth");l()};g.scrollDepth.addElements=function(w){if(typeof w=="undefined"||!g.isArray(w)){return}g.merge(v.elements,w);if(!h){l()}};g.scrollDepth.removeElements=function(w){if(typeof w=="undefined"||!g.isArray(w)){return}g.each(w,function(y,A){var x=g.inArray(A,v.elements);var z=g.inArray(A,a);if(x!=-1){v.elements.splice(x,1)}if(z!=-1){a.splice(z,1)}})};function r(B,D){var z,y,w;var C=null;var A=0;var x=function(){A=new Date;C=null;w=B.apply(z,y)};return function(){var E=new Date;if(!A){A=E}var F=D-(E-A);z=this;y=arguments;if(F<=0){clearTimeout(C);C=null;A=E;w=B.apply(z,y)}else{if(!C){C=setTimeout(x,F)}}return w}}function l(){h=true;b.on("scroll.scrollDepth",r(function(){var y=v.selector?g(p).height()+g(p).offset().top:g(p).height(),x=window.innerHeight?window.innerHeight:b.height(),w=v.selector?b.scrollTop()+g(p).offset().top+x:b.scrollTop()+x,z=s(y),A=+new Date-m;if(a.length>=v.elements.length+(v.percentage?4:0)){b.off("scroll.scrollDepth");h=false;return}if(v.elements){o(v.elements,w,A)}if(v.percentage){q(z,w,A)}},500))}t()};return g.scrollDepth}));